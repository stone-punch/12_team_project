<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공지사항</title>


    <link rel="stylesheet" href="./css/css.css">


</head>

<body>

    <div class="board-wrap">
        <div class="board-title">
            <strong><a href="./index.html">공지사항</a></strong>
            <p>공지사항을 빠르고 정확하게 안내해드립니다.</p>
        </div>
        <div class="board-list-wrap">
            <div id="FreeBoardList" class="board-list">
                <div class="top">
                    <div class="num">번호</div>
                    <div class="title">제목</div>
                    <div class="writer">글쓴이</div>
                    <div class="date">작성일</div>
                    <div class="count">조회</div>
                </div>
            </div>

            <div class="board-page">
                <a href="#" class="bt first">&lt;&lt;</a>
                <a href="#" class="bt prev">&lt;</a>
                <a href="#" class="num on">1</a>
                <a href="#" class="num">2</a>
                <a href="#" class="num">3</a>
                <a href="#" class="num">4</a>
                <a href="#" class="num">5</a>
                <a href="#" class="bt next">&gt;</a>
                <a href="#" class="bt last">&gt;&gt;</a>
            </div>
            <div class="btn">
                <button id="submitBtn">등록</button>
                <!-- <a href="#">수정</a> -->

            </div>
        </div>
    </div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js"; 
    const firebaseConfig = { 
        apiKey: "AIzaSyBdHq8r4EMKfC1d3kug8xOnv14Ui-TA_Hg", 
        authDomain: "petper-14f9d.firebaseapp.com", 
        databaseURL: "https://petper-14f9d-default-rtdb.firebaseio.com",
        projectId: "petper-14f9d", 
        storageBucket: "petper-14f9d.appspot.com",
        messagingSenderId: "382691123578", 
        appId: "1:382691123578:web:975408487ddb2e5fde76c3", 
        measurementId: "G-71HYZ44KRJ" 
    }; // Initialize Firebase 
    const app = initializeApp(firebaseConfig);

    import { getDatabase, ref, set, child, get, update, remove } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-database.js"; 
    const db = getDatabase();
    const submit = document.getElementById('submitBtn');
    const FreeBoardList = document.getElementById('FreeBoardList');

    getFreeBoardList(1); // 0이면 게시글 1~10

    function getFreeBoardList(page){   
        const dbref = ref(db);
        let titlearray;

        get(child(dbref, "BoardList/FreeBoard")).then((snapshot)=>{
            if(snapshot.exists()){

                titlearray = Object.keys(snapshot.val());

                for(let i=page; i<page+11; i++){
                    const form = document.createElement("div")

                    form.innerHTML = `<div class="num">`+snapshot.val()[i].boardid+`</div><div class="title"><a href="./view.html?num=${snapshot.val()[i].boardid}">`+snapshot.val()[i].title+`</a></div><div class="writer">`+snapshot.val()[i].userid+`</div><div class="date">`+snapshot.val()[i].date+`</div><div class="count">0</div>`
                    FreeBoardList.appendChild(form);
                }

            }
        })
        .catch((error)=>{
            console.log(error); 
        })

    }

    function gotoFreeBoardWrite(){
        window.location="./write.html";
    }

    submit.addEventListener('click', gotoFreeBoardWrite);

</script>
</body>

</html>